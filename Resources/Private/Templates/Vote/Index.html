<?xml version="1.0" encoding="UTF-8" ?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
	xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	xmlns:thr="Thucke\ThRating\ViewHelpers"
	data-namespace-typo3-fluid="true">

<div class='tx-thrating-pi1-content' id='tx-thrating-pi1-{ajaxRef}'>
	<div class='tx-thrating-content'>

	<div style="width: 500px;">Number of ratingobjecs: <f:count
		subject="{ratingobjects}" />
	<p><span style="font-size: 0.6em"> A <strong>ratingobject</strong> is
	the unique identified combination out of
	<ul>
		<li>tablename</li>
		<li>fieldname</li>
	</ul>
	</span></p>
	<p><span style="font-size: 0.6em"> A <strong>rating</strong> is the
	unique identified combination out of
	<ul>
		<li>ratingobject</li>
		<li>value of the field uid in the row</li>
	</ul>
	</span></p>
	</div>
	<f:if condition="{ratingobjects}">
		<f:then>
			<table style="width: 100%;">
				<caption>
					<p>Index of all ratingobjects</p>
				</caption>
				<tr>
					<th scope="col" title="RateTable">RateTable</th>
					<th scope="col" title="Ratefield">Ratefield</th>
					<th scope="col" title="Ratingobject">RObj</th>
					<th scope="col" title="RatedobjectUid">RatedObj Uid</th>
					<th scope="col" title="Rating">Rating</th>
					<th scope="col" title="Current Rating">Cur Rating</th>
					<th scope="col" title="Votecount">Votecount</th>
				</tr>
				<f:for each="{ratingobjects}" as="ratingobject">
					<f:if condition="{ratingobject.ratings}">
						<f:then>
							<f:for each="{ratingobject.ratings}" as="rating">
								<tr>
									<td>{ratingobject.rateTable}</td>
									<td>{ratingobject.rateField}</td>
									<td>{ratingobject.uid}</td>
									<td>{rating.ratedobjectuid}</td>
									<td>{rating.uid}</td>
									<td>{rating.currentrates.currentrate}</td>
									<td><f:count subject="{rating.votes}" /></td>
								</tr>
							</f:for>
						</f:then>
						<f:else>
							<td>{ratingobject.rateTable}</td>
							<td>{ratingobject.rateField}</td>
							<td>{ratingobject.uid}</td>
							<td colspan="3">No ratings yet</td>
						</f:else>
					</f:if>
					<tr>
						<td colspan="7">
						<hr />
						</td>
					</tr>
				</f:for>
			</table>
		</f:then>
		<f:else>
			<span>No entries yet</span>
		</f:else>
	</f:if>
	</div>
</div>
